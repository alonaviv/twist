{% extends 'base.html' %}

{% block content %}

<h1>Song Signup</h1>
<div>Hello {{user.first_name}} {{user.last_name}}. <br> What song would you like to sing? </div>
<div class="centered_container border form_styling">
<form method="POST" class="form-group">
    {% if messages %}
  {% for message in messages %}
  <br>
  <div class="error_message" style="color:red;">
    {{ message }}
  </div>
  <br>
  {% endfor %}
  {% endif %}
  <ul>
	{% csrf_token %}
	{{ form.as_ul }}
    <button type="submit">I want to sing!</button>
  </ul>
</form>
</div>

<div>Not {{user.first_name}} {{user.last_name}}? Click <a href="{% url 'switch_singer' %}">here</a></div>

{% if song_lineup %}

<br>
<hr>

<div> According to the current lineup, you have {{song_lineup.0.priority}} songs to go until you're called up for
  <u>{{song_lineup.0.song_name}}</u>.
</div>
<br>
<div><u>Songs you're signed up for:</u></div>
<ol>
{% for song, singers in song_lineup_with_singers.items %}
  <li>{{ song.song_name }}
    {% if singers.all %}
    (Together with {{ singers.all|join:", " }})
    {% endif %}

    &nbsp; &nbsp; <a href="{% url 'delete_song_request' song.pk %}"
                               onclick="return confirm('Are you sure you want to remove {{song.song_name}} from the queue?')">
      <i
          class="fas fa-times" style="color:red;"></i></a>
  </li>
{% endfor %}
</ol>


{% endif %}


<br>
<div>
    <h2>
  <a href="{{request.hostname}}/admin/song_signup/songrequest">Check out the songs we'll be hearing next
    </a>
    </h2>
</div>
 <br>


{% endblock %}
